function Service(e){var t=this;return t.__id=e,t}function Scope(e){var t=this;return t.__id=e,t.$$parent=null,t.$$children=[],Object.defineProperty(t,"_$$watchers",{value:[],enumerable:!1}),Object.defineProperty(t,"_$$events",{value:[],enumerable:!1}),t}var lark=function(){function e(){s.$refresh=$.$refresh,s.$template=$.$template,s.$cache=$.$cache,s.$expression=$.$expression}function t(){var e="_"+f;return f+=1,e}function n(e){var t=[];if(!e)return[];for(var n=0,r=e.length;n<r;n++)t.push($[e[n]]);return t}function r(e,t){for(var n=0,r=t.length;n<r;n++)o(e,t[n])}function o(e,t){if(void 0!=t){for(var n=0,o=d.length;n<o;n++)(t.hasAttribute(d[n].attr)||t.hasAttribute("data-"+d[n].attr))&&(e=a(e,t,d[n]));u(e,t),r(e,t.children)}}function i(e){var n=new Scope(t());return n.$$parent=e,e.$addChild(n),n}function a(e,t,n){var r=n.fn(),o={},a=null,u=e;if(r.scope){e=i(e);for(var c in r.scope)r.scope.hasOwnProperty(c)&&(a=c.replace(/([A-Z])/g,"-$1"),o[c]=u.$getExpValue(t.getAttribute(a)||t.getAttribute("data-"+a)));e.extend(o)}return r.template&&(t.innerHTML=r.template),r.templateId&&(t.innerHTML=s.$template.get(r.templateId)),r.link(e,t),e}function u(e,t){t.hasAttributes()&&Array.prototype.forEach.call(t.attributes,function(n){l(e,t,n)}),t.childNodes&&Array.prototype.forEach.call(t.childNodes,function(n){3==n.nodeType&&c(e,t,n)})}function c(e,t,n){var r=n.textContent.match(/{{\s*?(.+?)\s*?}}/gi);null!=r&&e.$watch(r,function(e,t){var n,r=t.textContent;return function(e){var o=r;e!=n&&(e.forEach(function(e){o=o.replace(/({{\s*?.+?\s*?}})/i,void 0!=e?e:"")}),t.textContent=o,n=e)}}(0,n))}function l(e,t,n){var r=n.value.match(/{{\s*?(.+?)\s*?}}/gi);null!=r&&e.$watch(r,function(e){var t,n=e.value;return function(r){var o=n;r!=t&&(r.forEach(function(e){o=o.replace(/({{\s*?.+?\s*?}})/i,void 0!=e?e:"")}),e.value=o,t=r)}}(n))}var s={},f=0,p=null,h=null,d=[],$={};return Object.defineProperty(s,"$rootScope",{get:function(){return h},enumerable:!1,configurable:!1}),s.addApp=function(e){p=document.getElementById(e),h=new Scope(t())},s.addComponent=function(e,t){var r=t.pop(),o=n(t);d.push({name:e,attr:e.replace(/([A-Z])/g,"-$1").toLowerCase(),fn:r.apply(this,o)})},s.addService=function(e,r){var o=r.pop(),i=n(r);return $[e]=Service.call(o.apply(this,i),t()),$[e]},s.run=function(){e(),s.$template.init(p),r(i(h),p.children)},s.bindMatchedComponents=o,s.createScope=i,s.generateUID=t,s}();document.addEventListener("DOMContentLoaded",function(){lark.run()}),lark.addService("$expression",["$cache",function(e){function t(e,t){return e="number"==typeof e||reIsUint.test(e)?+e:-1,t=null==t?c:t,e>-1&&e%1==0&&e<t}function n(e,t){var n=typeof e;return!!("string"==n&&s.test(e)||"number"==n)||"[object Array]"!==Object.prototype.toString.call(e)&&(!l.test(e)||null!=t&&e in a(t))}function r(e){var t=[];return e.replace(f,function(e,n,r,i,a){t.push(i?a.replace(p,"$1"):o(n)||r||e)}),t}function o(e){var t=e;return e&&e.replace(/(.*)\((.*?)\)/gi,function(e,n,o){n&&(t=function(e,t){var a=o.split(",").map(function(e){return r(e)});if("function"==typeof t[n]){var u=a.map(function(t){return i(e,t,!0)});return t[n].apply(t,u)}})}),t}function i(e,t,n){var r=e,o=t+"",i=0,u=t.length;if(null!=e){void 0!==o&&o in a(e)&&(t=[o]);for(;null!=e&&i<u;){if("function"==typeof t[i])e=t[i](r,e);else if(e.hasOwnProperty(t[i]))e=e[t[i]];else{if(n)return t[i];e=null}i+=1}return i&&i==u?e:void 0}}function a(e){return u(e)?e:Object(e)}function u(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var c=9007199254740991,l=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,s=/^\w*$/,f=/([^.\d]{1}[^.]+\(.*\))|[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,p=/\\(\\)?/g,h={},d={};return h.$get=function(e,t){if(null!=t){var n=null;if(t=t.replace(/{{|}}/g,""),null!=e)return void 0==(n=d[t])&&(n=r(t)),void 0==n?"":(d[t]=n,i(e,r(t)))}},h.$set=function(e,o,i){if(null==e)return e;var a=d[o],c=a+"";if(void 0==a&&(a=r(o)),void 0==a)return"";d[o]=a;for(var l=-1,s=(a=null!=e[c]||n(a,e)?[c]:a).length,f=s-1,p=e;null!=p&&++l<s;){var h=a[l];u(p)&&(l==f?p[h]=i:null==p[h]&&(p[h]=t(a[l+1])?[]:{})),p=p[h]}return e},h}]),lark.addService("$refresh",[function(){function e(t){null!=t&&(t.$execWatchers(),t.$$children&&t.$$children.length>0&&t.$$children.forEach(function(t){t.$execWatchers(),e(t)}))}var t={};return t.loop=function(){e(lark.$rootScope)},t}]),lark.addService("$template",[function(){function e(e,t){return void 0!==n[e]&&n[e]!==t?(console.warn("template: "+e+"has been registered"),n[e]):(n[e]=t,n[e])}var t={},n={};return t.get=function(e){return n[e]},t.init=function(t){var n=document.querySelectorAll('[type="text/x-lark-template"]');Array.prototype.forEach.call(n,function(t){e(t.id,t.innerHTML)})},t}]),Scope.prototype.extend=function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=this[t]||e[t])},Scope.prototype.$update=function(){lark.$refresh.loop()},Scope.prototype.$watch=function(e,t){var n=this;switch(typeof e){case"string":n._$$watchers.push(function(n){var r,o=null,i=!0;return function(){r=n.$getExpValue(e),o===JSON.stringify(r)&&!0!==i||"function"!=typeof t||(i=!1,t(r),o=JSON.stringify(r))}}(n));break;case"object":n._$$watchers.push(function(n){var r,o=null,i=!0;return function(){r=Array.prototype.map.call(e,function(e){return n.$getExpValue(e)}),o===JSON.stringify(r)&&!0!==i||"function"!=typeof t||(i=!1,t(r),o=JSON.stringify(r))}}(n));break;case"function":n._$$watchers.push(function(n){return function(){"function"==typeof t&&t(e.call(n))}}(n))}this.$update()},Scope.prototype.$execWatchers=function(){var e,t=this._$$watchers;if(t&&t.length>0)for(var n=0,r=t.length;n<r;n++)"function"==typeof(e=t[n])&&e()},Scope.prototype.$removeWatcher=function(){this._$$watchers=null},Scope.prototype.$destroy=function(){for(var e in this)this.hasOwnProperty(e)&&(this[e]=null,delete this[e]);this.$off(),this.$removeWatcher(),null!=this.$$parent&&this.$$parent.$removeChild(this)},Scope.prototype.$removeChild=function(e){this.$$children.splice(this.$$children.indexOf(e),1)},Scope.prototype.$addChild=function(e){void 0==typeof this.$$children&&(this.$$children=[]),this.$$children.indexOf(e)<0&&this.$$children.push(e)},Scope.prototype.$getExpValue=function(e){return lark.$expression.$get(this,e)},Scope.prototype.$setExpValue=function(e,t){lark.$expression.$set(this,e,t)},Scope.prototype.$on=function(e,t){return this._$$events.push({name:e,fn:t}),t},Scope.prototype.$emit=function(e,t){this._$$events.forEach(function(n){n.name===e&&"function"==typeof n.fn&&n.fn(t)}),this.$$children&&0!==this.$$children.length&&this.$$children.forEach(function(n){n.$emit(e,t)})},Scope.prototype.$broadcast=function(e,t){lark.$rootScope.$emit(e,t)},Scope.prototype.$off=function(e,t){var n;if(t)for(var r=0,o=this._$$events.length;r<o;r++)if(this._$$events[r].fn===t){n=r;break}e||(this._$$events=null),null!=n&&this._$$events.splice(n,1)},"click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" ").forEach(function(e){var t="js"+e.charAt(0).toUpperCase()+e.slice(1),n="js-"+e;lark.addComponent(t,[function(){return function(){return{link:function(t,r){var o=(r.getAttribute(n)||r.getAttribute("data-"+n)).replace(/\(.*?\)/g,"");r.addEventListener(e,function(e){void 0!=t[o]&&t[o](),t.$update()},!1)}}}}])}),lark.addComponent("jsHide",[function(){return function(){return{scope:{showClass:"="},link:function(e,t){var n=t.getAttribute("js-hide")||t.getAttribute("data-js-hide");e.$watch(n,function(n){t.style.display=n?"none":e.showClass||"block"})}}}}]),lark.addComponent("jsIf",[function(){return function(){return{link:function(e,t){var n=t.getAttribute("js-if")||t.getAttribute("data-js-if"),r=t.parentNode;e.$watch(n,function(e){e&&!t.parentNode!=r?r.appendChild(t):r.removeChild(t)})}}}}]),lark.addComponent("jsModel",[function(){return function(){return{link:function(e,t){var n=t.getAttribute("js-model")||t.getAttribute("data-js-model");n&&(t.value=e.$getExpValue(n)),e.$watch(n,function(e){t.value!==e&&(t.value=void 0===e?"":e)}),t.addEventListener("keyup",function(){var t=null;return function(r){t!=r.target.value&&(e.$setExpValue(n,r.target.value),e.$update()),t=r.target.value,r.target.focus()}}())}}}}]),lark.addComponent("jsRepeat",[function(){return function(){return{link:function(e,t){function n(){var t=lark.createScope(e.$$parent);return t.extend(e),delete t.$index,t.watchers=[],e.$$parent.$removeChild(t),t}function r(){e.$$parent.$watch(function(t){return function(){return e.$getExpValue(t)}}(u),function(e,t,n,r,o,i,a){function u(e){var t;if(f&&0!==f.length)for(var n=0,o=f.length;n<o;n++)t=e.indexOf(f[n][r]),f[n].$index=f[n].$index==t?f[n].$index:t}function c(e){var t,n=!1;if(f&&0!==f.length&&null!=e){for(var i=0,a=f.length;i<a;i++)void 0!=(t=f[i])&&e.indexOf(t[r])<0&&(n=!0,delete t[o],delete t[r],!!t.$element&&t.$element.parentNode.removeChild(t.$element),f.splice(f.indexOf(t),1),t.$destroy());n&&u(e)}}function l(e,n,o){var a,u,c=[];if(null!=n){null==f&&(f=[]);for(var l=f.length,s=n.length;l<s;l++)u=o.cloneNode(!0),t.appendChild(u),(a=lark.createScope(e)).extend(i),a.$index=l,a[r]=n[l],a.$element=u,a.$$parent=e,f.push(a),c.push(function(e,t){return function(){lark.bindMatchedComponents(e,t)}}(a,u));if(c.length>0)for(var p=0,h=c.length;p<h;p++)c[p]()}}var s=null,f=null;return function(t){if(s!=JSON.stringify(t)){var n,r=null==s||null==t?"initItems":n=JSON.parse(s).length-JSON.parse(JSON.stringify(t)).length;switch(r="initItems"==r?"initItems":0===n?"childrenChanges":n>0?"hasRemovedItems":"hasNewItems"){case"initItems":l(e,t,a);break;case"childrenChanges":u(t);break;case"hasRemovedItems":c(t);break;case"hasNewItems":l(e,t,a)}s=JSON.stringify(t)}}}(e.$$parent,t.parentNode,0,a,u,n(),t.cloneNode(!0)))}var o=t.getAttribute("js-repeat")||t.getAttribute("data-js-repeat"),i=o.match(/(\w+)\s+?[Ii][Nn]\s+?(\w+)/),a=(i[0],i[1]),u=i[2];e.hasOwnProperty("$index")&&e.hasOwnProperty(a)&&e.hasOwnProperty(u)&&e.$index==e[u].indexOf(e[a])||(r(),t.parentNode.removeChild(t))}}}}]),lark.addComponent("jsShow",[function(){return function(){return{scope:{showClass:"="},link:function(e,t){var n=t.getAttribute("js-show")||t.getAttribute("data-js-show");e.$watch(n,function(n){t.style.display=n?e.showClass||"block":"none"})}}}}]),lark.addComponent("jsSrc",[function(){return function(){return{link:function(e,t){e.$watch(function(){return t.getAttribute("js-src")||t.getAttribute("data-js-src")},function(){var e=null;return function(n){e!=n&&(t.setAttribute("src",n),e=n)}}())}}}}]);